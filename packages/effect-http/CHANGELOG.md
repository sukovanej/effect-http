# effect-http

## 0.77.5

### Patch Changes

- [#662](https://github.com/sukovanej/effect-http/pull/662) [`f8f08fd`](https://github.com/sukovanej/effect-http/commit/f8f08fd8646122d65a4c1f4472e661433459824e) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect dependencies.

## 0.77.4

### Patch Changes

- [#652](https://github.com/sukovanej/effect-http/pull/652) [`f20929b`](https://github.com/sukovanej/effect-http/commit/f20929b9c35960393ba2d940f9c46304eb4d9231) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix `ExampleServer.makeSchema` docstring.

- [#656](https://github.com/sukovanej/effect-http/pull/656) [`ea0e820`](https://github.com/sukovanej/effect-http/commit/ea0e8206fdf996bdd00d43d175996a54f31f1a2d) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix `Security.apiKey` with `query`. Resolves #655.

## 0.77.3

### Patch Changes

- [#647](https://github.com/sukovanej/effect-http/pull/647) [`6793bbd`](https://github.com/sukovanej/effect-http/commit/6793bbde8980bb79b83d3f89e2142672cee24c19) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix #646 - securitySchemes was overwritten by reference schemas.

## 0.77.2

### Patch Changes

- [#643](https://github.com/sukovanej/effect-http/pull/643) [`88f24aa`](https://github.com/sukovanej/effect-http/commit/88f24aacc054e0de69bcd519842ddf0faaf3d22b) Thanks [@sukovanej](https://github.com/sukovanej)! - Use an identifier annotation of a class schema as an OpenApi reference identifier.

## 0.77.1

### Patch Changes

- [#641](https://github.com/sukovanej/effect-http/pull/641) [`499a183`](https://github.com/sukovanej/effect-http/commit/499a1834d443beadeb0ff1e7a909cb08c1518f44) Thanks [@sukovanej](https://github.com/sukovanej)! - Change internal structure of `Handler` to give it an ability to handler multiple endpoints.

- [#642](https://github.com/sukovanej/effect-http/pull/642) [`215743c`](https://github.com/sukovanej/effect-http/commit/215743c91e1cfa95dd38378cd8096f6afa71d053) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect packages.

- [#638](https://github.com/sukovanej/effect-http/pull/638) [`d942cb3`](https://github.com/sukovanej/effect-http/commit/d942cb3805013b3b3b910f7a3dbce03ee036a1b5) Thanks [@sukovanej](https://github.com/sukovanej)! - Exclude `HttpError.HttpError` from the Handler error channel.

## 0.77.0

### Minor Changes

- [#636](https://github.com/sukovanej/effect-http/pull/636) [`bf12c11`](https://github.com/sukovanej/effect-http/commit/bf12c11f440541161b6e807d437f54627265def2) Thanks [@sukovanej](https://github.com/sukovanej)! - Make `HttpError` tagged.

### Patch Changes

- [#635](https://github.com/sukovanej/effect-http/pull/635) [`ea261af`](https://github.com/sukovanej/effect-http/commit/ea261afff36bb3fd6b0eeade8a511a111f37e851) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix `HttpError.isHttpError` type signature.

## 0.76.0

### Minor Changes

- [#631](https://github.com/sukovanej/effect-http/pull/631) [`621954d`](https://github.com/sukovanej/effect-http/commit/621954d011359e10a3ffd5cfbab8a722d222db54) Thanks [@sukovanej](https://github.com/sukovanej)! - Remove `Middlewares.basic`, use the `Security` module instead.

- [#631](https://github.com/sukovanej/effect-http/pull/631) [`621954d`](https://github.com/sukovanej/effect-http/commit/621954d011359e10a3ffd5cfbab8a722d222db54) Thanks [@sukovanej](https://github.com/sukovanej)! - Remove `Middlewares.cors`, use the `@effect/platform`'s `HttpMiddlewares.cors` instead.

- [#631](https://github.com/sukovanej/effect-http/pull/631) [`621954d`](https://github.com/sukovanej/effect-http/commit/621954d011359e10a3ffd5cfbab8a722d222db54) Thanks [@sukovanej](https://github.com/sukovanej)! - Remove `Middlewares.endpointCallsMetric`, use the opentelemetry instead.

### Patch Changes

- [#634](https://github.com/sukovanej/effect-http/pull/634) [`cc94f2f`](https://github.com/sukovanej/effect-http/commit/cc94f2f48dc120cf5be4bc7be9ca07fc9ea303d1) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/\* dependencies.

## 0.75.0

### Minor Changes

- [#629](https://github.com/sukovanej/effect-http/pull/629) [`41427e7`](https://github.com/sukovanej/effect-http/commit/41427e7bedf444e9549fd1fd5201dde9c082ff3f) Thanks [@sukovanej](https://github.com/sukovanej)! - Add `QuerySchema.Int`, `QuerySchema.number` and `QuerySchema.int`.

## 0.74.0

### Minor Changes

- [#625](https://github.com/sukovanej/effect-http/pull/625) [`16c76f7`](https://github.com/sukovanej/effect-http/commit/16c76f7b41d34647b5efbb565fcd1475ac5d76b3) Thanks [@sukovanej](https://github.com/sukovanej)! - Change `Middlewares.accessLog` level input to `LogLevel.LogLevel`.

- [#628](https://github.com/sukovanej/effect-http/pull/628) [`8481868`](https://github.com/sukovanej/effect-http/commit/84818689b8f1b7d485bbe9c8d45579436a3ba75f) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/platform packages.

- [#623](https://github.com/sukovanej/effect-http/pull/623) [`c45b838`](https://github.com/sukovanej/effect-http/commit/c45b83891169efddadd05d5336927f27c3d1e523) Thanks [@sukovanej](https://github.com/sukovanej)! - Merge `HttpError` and `Security` back into the `effect-http` package.

### Patch Changes

- [#628](https://github.com/sukovanej/effect-http/pull/628) [`8481868`](https://github.com/sukovanej/effect-http/commit/84818689b8f1b7d485bbe9c8d45579436a3ba75f) Thanks [@sukovanej](https://github.com/sukovanej)! - Add `QuerySchema.number`.

## 0.73.0

### Minor Changes

- [#620](https://github.com/sukovanej/effect-http/pull/620) [`39b22e4`](https://github.com/sukovanej/effect-http/commit/39b22e49d1657ae56aae7815aa60806943552a59) Thanks [@sukovanej](https://github.com/sukovanej)! - Make `Api.setRequestPath`, `Api.setRequestQuery` and `Api.setRequestHeaders` more type-safe by constraining the schema type.

### Patch Changes

- [#620](https://github.com/sukovanej/effect-http/pull/620) [`39b22e4`](https://github.com/sukovanej/effect-http/commit/39b22e49d1657ae56aae7815aa60806943552a59) Thanks [@sukovanej](https://github.com/sukovanej)! - Add `QuerySchema` module.

## 0.72.0

### Minor Changes

- [#618](https://github.com/sukovanej/effect-http/pull/618) [`224c0a5`](https://github.com/sukovanej/effect-http/commit/224c0a5e21d7b1244f0c48ef75391d3251ced344) Thanks [@sukovanej](https://github.com/sukovanej)! - Unify `HttpError` functions naming, add missing statuses and add docstrings.

### Patch Changes

- [#616](https://github.com/sukovanej/effect-http/pull/616) [`b491f7f`](https://github.com/sukovanej/effect-http/commit/b491f7f40fcd6db458f75aaf4dc1cc06a39029f4) Thanks [@sukovanej](https://github.com/sukovanej)! - Add `Handler.makeRaw`.

- Updated dependencies [[`224c0a5`](https://github.com/sukovanej/effect-http/commit/224c0a5e21d7b1244f0c48ef75391d3251ced344), [`b491f7f`](https://github.com/sukovanej/effect-http/commit/b491f7f40fcd6db458f75aaf4dc1cc06a39029f4), [`b491f7f`](https://github.com/sukovanej/effect-http/commit/b491f7f40fcd6db458f75aaf4dc1cc06a39029f4), [`b491f7f`](https://github.com/sukovanej/effect-http/commit/b491f7f40fcd6db458f75aaf4dc1cc06a39029f4)]:
  - effect-http-security@0.4.0
  - effect-http-error@0.4.0

## 0.71.3

### Patch Changes

- [#607](https://github.com/sukovanej/effect-http/pull/607) [`4244025`](https://github.com/sukovanej/effect-http/commit/4244025ae8ceccf8916b265414a1f2bfb8babd9c) Thanks [@kosei28](https://github.com/kosei28)! - Fix to read swagger files in proper format

- [#612](https://github.com/sukovanej/effect-http/pull/612) [`7fdf285`](https://github.com/sukovanej/effect-http/commit/7fdf285e6cc94e187c0f6cb6262866c4c0d5ade9) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix handling of `Schema.optional` without `{ exact: true }` when constructing OpenApi parameters.

- [#615](https://github.com/sukovanej/effect-http/pull/615) [`b3e1c67`](https://github.com/sukovanej/effect-http/commit/b3e1c671c5b9f50e347687df2002109eba21d3e4) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

- Updated dependencies [[`b3e1c67`](https://github.com/sukovanej/effect-http/commit/b3e1c671c5b9f50e347687df2002109eba21d3e4)]:
  - effect-http-security@0.3.1
  - effect-http-error@0.3.1

## 0.71.2

### Patch Changes

- [#603](https://github.com/sukovanej/effect-http/pull/603) [`6b388fa`](https://github.com/sukovanej/effect-http/commit/6b388faae43d121e5a58c739c2a9d78a108c656b) Thanks [@sukovanej](https://github.com/sukovanej)! - Improve error reporting of path string vs schema mismatch.

## 0.71.1

### Patch Changes

- [#601](https://github.com/sukovanej/effect-http/pull/601) [`6ba46dd`](https://github.com/sukovanej/effect-http/commit/6ba46dd475f8255aa1a844775eded6954ff6560b) Thanks [@KhraksMamtsov](https://github.com/KhraksMamtsov)! - fix RouterBuilder.handle type arguments order

## 0.71.0

### Minor Changes

- [#600](https://github.com/sukovanej/effect-http/pull/600) [`c35d893`](https://github.com/sukovanej/effect-http/commit/c35d89332e175a025aae2ff290afd18c358e5583) Thanks [@sukovanej](https://github.com/sukovanej)! - Rename `Api.ApiOptions` to `Api.Options`.

- [#597](https://github.com/sukovanej/effect-http/pull/597) [`f3e5ca1`](https://github.com/sukovanej/effect-http/commit/f3e5ca1faec4ec7253fa72391e947366a622477a) Thanks [@sukovanej](https://github.com/sukovanej)! - Move implementation of the OpenApi and Example compiler into effect-http.

### Patch Changes

- [#600](https://github.com/sukovanej/effect-http/pull/600) [`c35d893`](https://github.com/sukovanej/effect-http/commit/c35d89332e175a025aae2ff290afd18c358e5583) Thanks [@sukovanej](https://github.com/sukovanej)! - Add `Api.setOptions`, `Api.setEndpointOptions`, `ApiGroup.setOptions`, `ApiGroup.setEndpointOptions` and `ApiEndpoint.setOptions`.

## 0.70.0

### Minor Changes

- [#595](https://github.com/sukovanej/effect-http/pull/595) [`c40fb45`](https://github.com/sukovanej/effect-http/commit/c40fb45c82b117b51589c67672074f6eb6b8ad6c) Thanks [@sukovanej](https://github.com/sukovanej)! - Update `effect` to 3.4.0 and `@effect/platform` to 0.58.0.

### Patch Changes

- Updated dependencies [[`c40fb45`](https://github.com/sukovanej/effect-http/commit/c40fb45c82b117b51589c67672074f6eb6b8ad6c)]:
  - effect-http-security@0.3.0
  - effect-http-error@0.3.0

## 0.69.0

### Minor Changes

- [#592](https://github.com/sukovanej/effect-http/pull/592) [`89dfb16`](https://github.com/sukovanej/effect-http/commit/89dfb1600b505364b66e7712f6e18a0c664aac8d) Thanks [@sukovanej](https://github.com/sukovanej)! - Refactor client types. Use `Handler.Handler.*` helper types.

- [#592](https://github.com/sukovanej/effect-http/pull/592) [`89dfb16`](https://github.com/sukovanej/effect-http/commit/89dfb1600b505364b66e7712f6e18a0c664aac8d) Thanks [@sukovanej](https://github.com/sukovanej)! - Add variance to `RouterBuilder`.

- [#593](https://github.com/sukovanej/effect-http/pull/593) [`16762d6`](https://github.com/sukovanej/effect-http/commit/16762d6edade9ed283efcf0b11416b184eace5b9) Thanks [@sukovanej](https://github.com/sukovanej)! - Remove custom schema error formatter and use the default one.

- [#593](https://github.com/sukovanej/effect-http/pull/593) [`16762d6`](https://github.com/sukovanej/effect-http/commit/16762d6edade9ed283efcf0b11416b184eace5b9) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/platform and @effect/schema.

- [#592](https://github.com/sukovanej/effect-http/pull/592) [`89dfb16`](https://github.com/sukovanej/effect-http/commit/89dfb1600b505364b66e7712f6e18a0c664aac8d) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix typo - `Api.Api.Content` -> `Api.Api.Context`.

- [#592](https://github.com/sukovanej/effect-http/pull/592) [`89dfb16`](https://github.com/sukovanej/effect-http/commit/89dfb1600b505364b66e7712f6e18a0c664aac8d) Thanks [@sukovanej](https://github.com/sukovanej)! - Add missing `TypeId`s and refinements.

- [#590](https://github.com/sukovanej/effect-http/pull/590) [`ff7faf4`](https://github.com/sukovanej/effect-http/commit/ff7faf4c4fd5f442c14e399e81d8a84521b3be34) Thanks [@sukovanej](https://github.com/sukovanej)! - Replace `Route` module by a new `Handler` module.

- [#592](https://github.com/sukovanej/effect-http/pull/592) [`89dfb16`](https://github.com/sukovanej/effect-http/commit/89dfb1600b505364b66e7712f6e18a0c664aac8d) Thanks [@sukovanej](https://github.com/sukovanej)! - Re-order type arguments of the RouterBuilder type.

### Patch Changes

- [#592](https://github.com/sukovanej/effect-http/pull/592) [`89dfb16`](https://github.com/sukovanej/effect-http/commit/89dfb1600b505364b66e7712f6e18a0c664aac8d) Thanks [@sukovanej](https://github.com/sukovanej)! - Add missing @internal annotations.

- Updated dependencies [[`16762d6`](https://github.com/sukovanej/effect-http/commit/16762d6edade9ed283efcf0b11416b184eace5b9), [`89dfb16`](https://github.com/sukovanej/effect-http/commit/89dfb1600b505364b66e7712f6e18a0c664aac8d)]:
  - effect-http-security@0.2.0
  - effect-http-error@0.2.0

## 0.68.0

### Minor Changes

- [#587](https://github.com/sukovanej/effect-http/pull/587) [`78d4861`](https://github.com/sukovanej/effect-http/commit/78d4861e74ffdd6122dc3ba3e7f66452bac86f17) Thanks [@sukovanej](https://github.com/sukovanej)! - Add `RouterBuilder.merge`.

## 0.67.3

### Patch Changes

- [#586](https://github.com/sukovanej/effect-http/pull/586) [`65d0061`](https://github.com/sukovanej/effect-http/commit/65d00617681e1cd38c0a65ea52ff89433091537c) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

- Updated dependencies [[`65d0061`](https://github.com/sukovanej/effect-http/commit/65d00617681e1cd38c0a65ea52ff89433091537c)]:
  - effect-http-security@0.1.3
  - effect-http-error@0.1.3

## 0.67.2

### Patch Changes

- [#579](https://github.com/sukovanej/effect-http/pull/579) [`50363cb`](https://github.com/sukovanej/effect-http/commit/50363cb077cc716f00caaf762f1d7c92fde34853) Thanks [@sukovanej](https://github.com/sukovanej)! - Update /platform.

- Updated dependencies [[`50363cb`](https://github.com/sukovanej/effect-http/commit/50363cb077cc716f00caaf762f1d7c92fde34853)]:
  - effect-http-security@0.1.2
  - effect-http-error@0.1.2

## 0.67.1

### Patch Changes

- [#576](https://github.com/sukovanej/effect-http/pull/576) [`8f172b7`](https://github.com/sukovanej/effect-http/commit/8f172b7a5fbeb5769c1b72a09f2d4b6a4027ea78) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

- Updated dependencies [[`8f172b7`](https://github.com/sukovanej/effect-http/commit/8f172b7a5fbeb5769c1b72a09f2d4b6a4027ea78)]:
  - effect-http-security@0.1.1
  - effect-http-error@0.1.1

## 0.67.0

### Minor Changes

- [`9832233`](https://github.com/sukovanej/effect-http/commit/9832233bf0147187f953ab1a266b1f80a99bdea4) Thanks [@sukovanej](https://github.com/sukovanej)! - Move `Security` and `ServerError` modules into separate packages. `ServerError` was renamed to `HttpError`.

- [#575](https://github.com/sukovanej/effect-http/pull/575) [`9270e80`](https://github.com/sukovanej/effect-http/commit/9270e8014313f36af1943b483051ed1f64bc8616) Thanks [@sukovanej](https://github.com/sukovanej)! - Remove context of api's security from the client.

### Patch Changes

- Updated dependencies [[`9832233`](https://github.com/sukovanej/effect-http/commit/9832233bf0147187f953ab1a266b1f80a99bdea4), [`9832233`](https://github.com/sukovanej/effect-http/commit/9832233bf0147187f953ab1a266b1f80a99bdea4), [`9270e80`](https://github.com/sukovanej/effect-http/commit/9270e8014313f36af1943b483051ed1f64bc8616)]:
  - effect-http-error@0.1.0
  - effect-http-security@0.1.0

## 0.66.0

### Minor Changes

- [#566](https://github.com/sukovanej/effect-http/pull/566) [`8709b13`](https://github.com/sukovanej/effect-http/commit/8709b13cb6a47ec3dfc1d5d9b37e2b07a0eec0f8) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/schema.

## 0.65.0

### Minor Changes

- [#564](https://github.com/sukovanej/effect-http/pull/564) [`20b87bf`](https://github.com/sukovanej/effect-http/commit/20b87bf2e0b13cbc09dbeb8369a0f0900a7aaabe) Thanks [@sukovanej](https://github.com/sukovanej)! - Add `ClientError.isClientSideError` and `ClientError.isServerSideError`.

## 0.64.4

### Patch Changes

- [#555](https://github.com/sukovanej/effect-http/pull/555) [`0d8ce3b`](https://github.com/sukovanej/effect-http/commit/0d8ce3b79dc9f971f6f198ea0a5062f841491dc5) Thanks [@sukovanej](https://github.com/sukovanej)! - Refactor internal parsers / encoders.

- [#560](https://github.com/sukovanej/effect-http/pull/560) [`2673b0d`](https://github.com/sukovanej/effect-http/commit/2673b0d60bb8f5685229ec11019a8c733f73c6ae) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/platform.

## 0.64.3

### Patch Changes

- [#551](https://github.com/sukovanej/effect-http/pull/551) [`cb22b08`](https://github.com/sukovanej/effect-http/commit/cb22b080b4dd7cb220a40e67796d5989055b9392) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/platform.

## 0.64.2

### Patch Changes

- [#549](https://github.com/sukovanej/effect-http/pull/549) [`71b7c27`](https://github.com/sukovanej/effect-http/commit/71b7c27fc4f484fa0418786fcb264a274fb8dfbc) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.64.1

### Patch Changes

- [#543](https://github.com/sukovanej/effect-http/pull/543) [`307ec79`](https://github.com/sukovanej/effect-http/commit/307ec79ad4a09a4f03cf2f864b3a3464e74c56e5) Thanks [@Almaju](https://github.com/Almaju)! - Request body should be required by default

- [#546](https://github.com/sukovanej/effect-http/pull/546) [`52a651d`](https://github.com/sukovanej/effect-http/commit/52a651d8de5dfecff722d645505ab00bd04b4502) Thanks [@sukovanej](https://github.com/sukovanej)! - Update schema-openapi.

## 0.64.0

### Minor Changes

- [#539](https://github.com/sukovanej/effect-http/pull/539) [`4d1456f`](https://github.com/sukovanej/effect-http/commit/4d1456f4a928738fb1a456fb2e0b42d488ab7651) Thanks [@sukovanej](https://github.com/sukovanej)! - Add support for standalone handlers to allow an extraction of the handler logic.

  ```ts
  const myEndpointHandler = RouterBuilder.handler(
    api,
    "myEndpoint",
    ({ query }) => Effect.succeed(query.country),
  );

  const app = pipe(
    RouterBuilder.make(api),
    RouterBuilder.handle(myEndpointHandler),
    RouterBuilder.build,
  );
  ```

- [#542](https://github.com/sukovanej/effect-http/pull/542) [`15b5a09`](https://github.com/sukovanej/effect-http/commit/15b5a0923adcda78ad7c3d463cde86f1bf40d3f8) Thanks [@sukovanej](https://github.com/sukovanej)! - Update schema-openapi.

## 0.63.0

### Minor Changes

- [#536](https://github.com/sukovanej/effect-http/pull/536) [`2881dea`](https://github.com/sukovanej/effect-http/commit/2881dea644b8002d357fc01ef5f0d2922f63267b) Thanks [@sukovanej](https://github.com/sukovanej)! - Remove `mapRequest` from `Client.make` options. Use `baseUrl` or `httpClient` options instead.

## 0.62.1

### Patch Changes

- [#534](https://github.com/sukovanej/effect-http/pull/534) [`1f030d2`](https://github.com/sukovanej/effect-http/commit/1f030d237b94037636e86b375bc45f4d1c93defa) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/platform.

## 0.62.0

### Minor Changes

- [#530](https://github.com/sukovanej/effect-http/pull/530) [`ef026aa`](https://github.com/sukovanej/effect-http/commit/ef026aa98792776a9d11b9e789570e6ecc9d3cae) Thanks [@sukovanej](https://github.com/sukovanej)! - Update to effect 3.0

## 0.61.1

### Patch Changes

- [#525](https://github.com/sukovanej/effect-http/pull/525) [`157cb6d`](https://github.com/sukovanej/effect-http/commit/157cb6db647f50f69daca5f682793255fec57812) Thanks [@sukovanej](https://github.com/sukovanej)! - Update schema-openapi.

## 0.61.0

### Minor Changes

- [#522](https://github.com/sukovanej/effect-http/pull/522) [`f50c467`](https://github.com/sukovanej/effect-http/commit/f50c467cf7848de6c151d3b159ca270b665d3470) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.60.7

### Patch Changes

- [#519](https://github.com/sukovanej/effect-http/pull/519) [`126a234`](https://github.com/sukovanej/effect-http/commit/126a234afcb1609caf0b59dfa65dbcc28746cc00) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.60.6

### Patch Changes

- [#516](https://github.com/sukovanej/effect-http/pull/516) [`05f4ef3`](https://github.com/sukovanej/effect-http/commit/05f4ef30f257c289aad8f48ceb8ad63d3923196a) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

- [#513](https://github.com/sukovanej/effect-http/pull/513) [`70eee08`](https://github.com/sukovanej/effect-http/commit/70eee08e87b78bbd171b601f45e93368d915080f) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/platform and @effect/schema.

## 0.60.5

### Patch Changes

- [#509](https://github.com/sukovanej/effect-http/pull/509) [`cb6253a`](https://github.com/sukovanej/effect-http/commit/cb6253a3af65411e7ec5fac3e59a5c35a75c6298) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

- [#509](https://github.com/sukovanej/effect-http/pull/509) [`cb6253a`](https://github.com/sukovanej/effect-http/commit/cb6253a3af65411e7ec5fac3e59a5c35a75c6298) Thanks [@sukovanej](https://github.com/sukovanej)! - Deprecate `Middlewares.basicAUth`.

## 0.60.4

### Patch Changes

- [#506](https://github.com/sukovanej/effect-http/pull/506) [`1a2bf5f`](https://github.com/sukovanej/effect-http/commit/1a2bf5fb09210b37f1208143b8ee8adebf217842) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.60.3

### Patch Changes

- [#504](https://github.com/sukovanej/effect-http/pull/504) [`2874f89`](https://github.com/sukovanej/effect-http/commit/2874f89700963127c284589b6b209e02b26c44dc) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix `ApiResponse.isFullResponse` - filter out non-2xx responses.

- [#504](https://github.com/sukovanej/effect-http/pull/504) [`2874f89`](https://github.com/sukovanej/effect-http/commit/2874f89700963127c284589b6b209e02b26c44dc) Thanks [@sukovanej](https://github.com/sukovanej)! - Fail using errors instead of defects.

## 0.60.2

### Patch Changes

- [#502](https://github.com/sukovanej/effect-http/pull/502) [`f15c472`](https://github.com/sukovanej/effect-http/commit/f15c4729dbaa7f0d0f9a9eb61f4facf86d175a1c) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.60.1

### Patch Changes

- [#500](https://github.com/sukovanej/effect-http/pull/500) [`bf0f884`](https://github.com/sukovanej/effect-http/commit/bf0f884b3db88a166e525cbf4690ff603051a24a) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix OpenApi with no body nor headers.

- [#500](https://github.com/sukovanej/effect-http/pull/500) [`bf0f884`](https://github.com/sukovanej/effect-http/commit/bf0f884b3db88a166e525cbf4690ff603051a24a) Thanks [@sukovanej](https://github.com/sukovanej)! - Allow a union schema for response headers.

## 0.60.0

### Minor Changes

- [#497](https://github.com/sukovanej/effect-http/pull/497) [`37db9ad`](https://github.com/sukovanej/effect-http/commit/37db9ad8ea12df0d3f6562cce8319cf3f570a70c) Thanks [@sukovanej](https://github.com/sukovanej)! - New security API.

  The security was completely reworked to increase the flexibility how
  the server deals with authorization and authentication.

  The `SecurityScheme` module was removed and replaced by a new `Security` module.
  It exposes a new `Security<A, E, R>` type that captures the security handling
  and the OpenAPI specification. It also exposes a set of combinators that allow
  to combine `Security` specs and enhance them with arbitrary effectful computations.

  Before

  ```ts
  const api = Api.make().pipe(
    Api.addEndpoint(
      Api.post("mySecuredEndpoint", "/my-secured-endpoint").pipe(
        Api.setResponseBody(Schema.string),
        Api.addSecurity("mySecurity", {
          type: "http",
          options: {
            scheme: "basic",
          },
          schema: Schema.Secret,
        }),
      ),
    ),
  );
  ```

  After

  ```ts
  const api = Api.make().pipe(
    Api.addEndpoint(
      Api.post("mySecuredEndpoint", "/my-secured-endpoint").pipe(
        Api.setResponseBody(Schema.string),
        Api.setSecurity(Security.basic()),
      ),
    ),
  );
  ```

  The client was modified to support the new security API. The second security argument
  of endpoint methods was replaced by a general `(request: ClientRequest) => ClientRequest`
  mapping. `Client` exposes two new helper functions `Client.setBasic` and `Client.setBearer`.

  Before

  ```ts
  client.security({ ... }, { mySecurity: '...' })
  ```

  After

  ```ts
  client.endpoint({ ... }, Client.setBasic("user", "pass"))
  ```

  Please refer to the main readme for more information on the new security API.

### Patch Changes

- [#495](https://github.com/sukovanej/effect-http/pull/495) [`c765639`](https://github.com/sukovanej/effect-http/commit/c765639628cb416d0a165cc0012bd67a35ab0eb7) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

- [#499](https://github.com/sukovanej/effect-http/pull/499) [`7d65607`](https://github.com/sukovanej/effect-http/commit/7d65607aa64faea53bdd5952f9c5280be1d0c054) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix `void` client response.

## 0.59.2

### Patch Changes

- [#492](https://github.com/sukovanej/effect-http/pull/492) [`cc35e22`](https://github.com/sukovanej/effect-http/commit/cc35e22744fa6a74f141f09032096a7a690e3d26) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.59.1

### Patch Changes

- [#489](https://github.com/sukovanej/effect-http/pull/489) [`aae259d`](https://github.com/sukovanej/effect-http/commit/aae259db0446c7097093cbc5040ad080e0a72bd0) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect dependencies.

## 0.59.0

### Minor Changes

- [#482](https://github.com/sukovanej/effect-http/pull/482) [`4883b71`](https://github.com/sukovanej/effect-http/commit/4883b7143b8a358edceda13b248a31784ed877df) Thanks [@sukovanej](https://github.com/sukovanej)! - ## New pipeable API

  Overall, the API based on unnamed objects containing `response` and `request` fields
  was replaced by more strict and explicit pipeable API which constructs new `Api`, `ApiGroup`,
  `ApiEndpoint`, `ApiResponse` and `ApiRequest` objects under the hood.

  Before

  ```ts
  const api = pipe(
    Api.api({ title: "Users API" }),
    Api.get("getUser", "/user", {
      response: User,
      request: { query: GetUserQuery },
    }),
  );
  ```

  After

  ```ts
  const api = pipe(
    Api.make({ title: "Users API" }),
    Api.addEndpoint(
      pipe(
        Api.get("getUser", "/user"),
        Api.setResponseBody(UserResponse),
        Api.setRequestQuery(GetUserQuery),
      ),
    ),
  );
  ```

  ## Multiple-response endpoints changes

  The `content` field was renamed to `body`. So on the client side, an endpoint with multiple
  responses now returns an object `{ status; body; headers }` instead of `{ status; content; headers }`.
  The same on the server side, the handling function shall return the object with a `body` field
  instead of `content`.

  Also, with the new API, the _full response_ is applied only in case the there is a single response
  and it specifies headers or if there are multiple responses. So, in case the endpoint changes
  the response status, the client now returns the body only.

  ```ts
  const api = pipe(
    Api.make({ title: "Users API" }),
    Api.addEndpoint(
      pipe(
        Api.post("createUser", "/user"),
        Api.setResponseStatus(201),
        Api.setResponseBody(UserResponse),
      ),
    ),
  );

  const client = Client.make(api);
  client.createUser({}); // now returns `UserResponse` instead of `{ status: 201; body: UserResponse; headers? }`
  ```

  Multiple responses can be now defined using `Api.addResponse` / `ApiGroup.addResponse` combinators. They
  accept either a `ApiResponse` object (constructed using `ApiResponse.make`) or an object of shape
  `{ status; body?; headers? }`.

  ```ts
  const helloEndpoint = Api.post("hello", "/hello").pipe(
    // ApiResponse constructor
    Api.addResponse(ApiResponse.make(201, Schema.number)),
    // plain object
    Api.addResponse({
      status: 204,
      headers: Schema.struct({ "x-another": Schema.NumberFromString }),
    }),
  );
  ```

  ## Security

  The security was one of the reasons to introduce the new API. Previously, the way to declare
  an authorization for an endpoint was to specify it in the endpoint options. Now, it is part
  of the pipeable API.

  ```ts
  const mySecuredEnpoint = Api.post("security", "/testSecurity").pipe(
    Api.setResponseBody(Schema.string),
    Api.addSecurity("myAwesomeBearerAuth", mySecuritySchema),
  );

  const api = Api.make().pipe(Api.addEndpoint(mySecuredEnpoint));
  ```

## 0.58.2

### Patch Changes

- [#476](https://github.com/sukovanej/effect-http/pull/476) [`d1d2f8c`](https://github.com/sukovanej/effect-http/commit/d1d2f8cce80bdafa44c4346dc60e428fd8727ea0) Thanks [@KhraksMamtsov](https://github.com/KhraksMamtsov)! - filter out non 100-299 statuses from success channel

- [#477](https://github.com/sukovanej/effect-http/pull/477) [`f7c3b10`](https://github.com/sukovanej/effect-http/commit/f7c3b101b7889f02ac44127655e37b06de2aa87c) Thanks [@KhraksMamtsov](https://github.com/KhraksMamtsov)! - split the ClientError into a union with two members

- [#479](https://github.com/sukovanej/effect-http/pull/479) [`2a5220b`](https://github.com/sukovanej/effect-http/commit/2a5220b0b584b1e9a411e363778d8ba0c01fe310) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.58.1

### Patch Changes

- [#474](https://github.com/sukovanej/effect-http/pull/474) [`40b4374`](https://github.com/sukovanej/effect-http/commit/40b4374e8e2295a0c7122c263989d9aef4558e57) Thanks [@sukovanej](https://github.com/sukovanej)! - Update schema-openapi.

- [#474](https://github.com/sukovanej/effect-http/pull/474) [`40b4374`](https://github.com/sukovanej/effect-http/commit/40b4374e8e2295a0c7122c263989d9aef4558e57) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.58.0

### Minor Changes

- [#472](https://github.com/sukovanej/effect-http/pull/472) [`dadfb8c`](https://github.com/sukovanej/effect-http/commit/dadfb8c475e884b0b8947fa390f9545eb5703941) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.57.3

### Patch Changes

- [#469](https://github.com/sukovanej/effect-http/pull/469) [`0d5e2fc`](https://github.com/sukovanej/effect-http/commit/0d5e2fcac69b0440559c8259b78735b3bc3284c2) Thanks [@sukovanej](https://github.com/sukovanej)! - Update dependencies.

- [#469](https://github.com/sukovanej/effect-http/pull/469) [`0d5e2fc`](https://github.com/sukovanej/effect-http/commit/0d5e2fcac69b0440559c8259b78735b3bc3284c2) Thanks [@sukovanej](https://github.com/sukovanej)! - Update namespace imports internally.

## 0.57.2

### Patch Changes

- [#468](https://github.com/sukovanej/effect-http/pull/468) [`46c7693`](https://github.com/sukovanej/effect-http/commit/46c7693ff4725944ddbf0d68fa5f88b31f3cd3af) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect dependencies.

## 0.57.1

### Patch Changes

- [#463](https://github.com/sukovanej/effect-http/pull/463) [`f02d1b3`](https://github.com/sukovanej/effect-http/commit/f02d1b33ba8fdea117e179ef7828c1322eeca677) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect packages.

## 0.57.0

### Minor Changes

- [#461](https://github.com/sukovanej/effect-http/pull/461) [`8f4788a`](https://github.com/sukovanej/effect-http/commit/8f4788a7e497cdfa5a3f20828e48c26db523c123) Thanks [@sukovanej](https://github.com/sukovanej)! - Added `docsPath` option to `RouterBuilder.Options`. The standalone `SwaggerRouter` now serves files from `/` instead of `/docs` and it is expected the user-land code will mount the router. Fixed SwaggerRouter prefix path resolving - now it works with both `HttpServer.router.mount` and `HttpServer.router.mountApp`.

## 0.56.1

### Patch Changes

- [#459](https://github.com/sukovanej/effect-http/pull/459) [`1635286`](https://github.com/sukovanej/effect-http/commit/1635286cfd54c3e2ace8dd86d7f2f9687740760e) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix client handling of non-2xx response with not specified response.

## 0.56.0

### Minor Changes

- [#456](https://github.com/sukovanej/effect-http/pull/456) [`1cfc2f7`](https://github.com/sukovanej/effect-http/commit/1cfc2f737d5606c6670cec18a135cd6a67debd22) Thanks [@sukovanej](https://github.com/sukovanej)! - Allow to omit `response` to produce 204 No Content. Update @effect/schema.

## 0.55.1

### Patch Changes

- [#454](https://github.com/sukovanej/effect-http/pull/454) [`bcd2606`](https://github.com/sukovanej/effect-http/commit/bcd2606883cec2167e27c5e02a15654df008dea6) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/platform dependencies.

## 0.55.0

### Minor Changes

- [#452](https://github.com/sukovanej/effect-http/pull/452) [`7577e3b`](https://github.com/sukovanej/effect-http/commit/7577e3ba3f6c26803708fe0abc95ae7386af1dfb) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect.

## 0.54.2

### Patch Changes

- [#450](https://github.com/sukovanej/effect-http/pull/450) [`94464e2`](https://github.com/sukovanej/effect-http/commit/94464e2c143a4e4e874ff769be357cdc8776cd18) Thanks [@sukovanej](https://github.com/sukovanej)! - Fix: remove `Scope` from client response effects. Scope is resolved internally.

## 0.54.1

### Patch Changes

- [#448](https://github.com/sukovanej/effect-http/pull/448) [`549859b`](https://github.com/sukovanej/effect-http/commit/549859b06b426d1a97723c430a755e0777ae97cc) Thanks [@sukovanej](https://github.com/sukovanej)! - Update effect dependencies.

## 0.54.0

### Minor Changes

- [#416](https://github.com/sukovanej/effect-http/pull/416) [`5942f84`](https://github.com/sukovanej/effect-http/commit/5942f840322d8df764d4c74da1229628d72aca9d) Thanks [@KhraksMamtsov](https://github.com/KhraksMamtsov)! - add http security scheme

## 0.53.0

### Minor Changes

- [#440](https://github.com/sukovanej/effect-http/pull/440) [`2d17f7c`](https://github.com/sukovanej/effect-http/commit/2d17f7cc073e4fd7b5403e58eeebb9288100245b) Thanks [@sukovanej](https://github.com/sukovanej)! - Move swagger-ui-dist to effect-http-node.

### Patch Changes

- [#440](https://github.com/sukovanej/effect-http/pull/440) [`2d17f7c`](https://github.com/sukovanej/effect-http/commit/2d17f7cc073e4fd7b5403e58eeebb9288100245b) Thanks [@sukovanej](https://github.com/sukovanej)! - Update @effect/platform packages.

## 0.52.0

### Minor Changes

- [#430](https://github.com/sukovanej/effect-http/pull/430) [`6641c91`](https://github.com/sukovanej/effect-http/commit/6641c911b40d92931cf6fe60afc1932e2529f823) Thanks [@sukovanej](https://github.com/sukovanej)! - Remove platform-specific implementation from effect-http. Expose it from the effect-http-node.
